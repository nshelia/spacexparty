image: node:8.11.4
clone:
  depth: full
pipelines:
  default:
    - step:
        name: Deploy to Heroku
        deployment: production
        caches:
          - node
        script: 
          - node --version
          - npm --version
          - npm install
          - npm run build
          - npm test
          - git push -f https://heroku:9af94079-322a-443b-a068-d33168256f76@git.heroku.com/spacexcalendar-v2.git HEAD
